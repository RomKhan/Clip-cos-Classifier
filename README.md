## Установка и запуск парсера
Для запуска программы обработки данных необходимо сначала настроить среду python, в которой она будет запускаться, для чего необходимо проделать следующие шаги:
<ol>
  <li>Запустить среду python (или conda) в консоли;</li>
  <li>Перейти в папку с исходным кодом программы;</li>
  <li>Выполнить команду pip install -r requirements.txt;</li>
  <li>Дождаться окончания загрузки всех библиотек.</li>
</ol></br>
После настройки среды запуск модулей можно проводить через команды python <название файла> <params>. Названия файлов для разных модулей программы, следующие:
<ol>
  <li>Модуль извлечения эмбеддингов изображений – embeddings_processing.py;</li>
  <li>Модуль базовой фильтраций изображений с использованием CLIP – get_simple_dataset.py;</li>
  <li>Модуль фильтрации изображений с нейронной сети – get_filtered_dataset.py.</li>
</ol></br>
Параметры для каждой программы уникальны, но задаются они через пробел. Ниже представлен список параметров для каждого модуля:
<ol>
  <li>Модуль извлечения эмбеддингов изображений:</li>
  <ol>
    <li>Параметр 1 – Обязательный параметр. Отвечает за устройство, на котором программа будет производить вычисления. Всего допустимы 2 значения – cpu (вычисления будут производиться на центральном процессоре) и cuda (вычисления будут производиться на видеокарте nvidia). Рекомендуется всегда выставлять устройство cuda, если устройство имеет видеокарту nvidia;</li>
    <li>Параметр 2 – Обязательный параметр. Отвечает за выбор модели, эмбеддинги которой программа должна вернуть. Всего модуль поддерживает работу с 3 моделями – clip, resnext и resnet;</li>
    <li>Параметр 3 – Необязательный параметр. Отвечает за максимальное число объявлений, которые программа будет обрабатывать. Обязательно либо указать какое-то число, либо символ “–“ (в данном случае модуль будет обрабатывать все объявления);</li>
    <li>Параметр 4 - Необязательный параметр. Путь к датасету с эмбеддингами, которые будет создаваться (или уже создан). Можно указать путь в файловой системе или символ “–“ (в данном случае в качестве пути датасета будет выбрана директория с исходным кодом);</li>
    <li>Параметр 5 - Необязательный параметр. Путь к изображениям в файловой системе.  Важно, чтобы структура папки с изображениями совпадала со структурой выходной папки для изображений парсера. В качестве значения данного параметра можно указать путь в файловой системе или символ “–“ (в данном случае в качестве будет выбрана директория с исходным кодом);</li>
    <li>Параметр 6 - Необязательный параметр. Путь к базе данных, которая будет создаваться (или уже создана) для матчинга изображений с объявлениями. Можно указать путь в файловой системе или символ “–“ (в данном случае в качестве пути будет выбрана директория с исходным кодом).</li>
  </ol>
  <li>Модуль базовой фильтраций изображений с использованием CLIP:</li>
  <ol>
    <li>Параметр 1 – Необязательный параметр. Путь к датасету с эмбеддингами. Можно указать путь в файловой системе или символ “–“ (в данном случае в качестве пути датасета будет выбрана директория с исходным кодом);</li>
    <li>Параметр 2 - Необязательный параметр. Отвечает за выбор модели для отбора соседей. Всего модулем поддерживается 2 модели – clip и resnext, также в качестве значения параметра можно указать символ “-” - в таком случае функция коррекции распределения вероятностей промптов для изображений на вероятности соседей будет выключена;</li>
    <li>Параметр 3 - Необязательный параметр. Отвечает за максимальное количество изображений, которые модуль будет обрабатывать. Параметр задается в виде числа (можно также указать символ “-”, тогда программа будет обрабатывать все последние изображения). Стоит отметить, что оперативная память устройства ограничена, поэтому не стоит ставить лимит слишком большим, иначе произойдет переполнение по памяти;</li>
    <li>Параметр 4 - Необязательный параметр. Отвечает путь для вывода базы данных индексов соседей для каждого объявления. Можно указать путь в файловой системе или символ “–“ (в данном случае в качестве пути будет выбрана директория с исходным кодом);</li>
    <li>Параметр 5 - Необязательный параметр. Отвечает за общее количество изображений, среди которых происходит поиск соседей. Параметр задается в виде числа (можно также указать символ “-”, тогда соседи будут искаться среди 400k последних изображений). Не рекомендуется ставить это значение слишком большим, так как возможно переполнение.</li>
  </ol>
  <li>Модуль фильтрации изображений с нейронной сети:</li>
  <ol>
    <li>Параметр 1 – Обязательный параметр. Отвечает за устройство, на котором программа будет производить вычисления. Всего допустимы 2 значения – cpu (вычисления будут производиться на центральном процессоре) и cuda (вычисления будут производиться на видеокарте nvidia). Рекомендуется всегда выставлять устройство cuda, если устройство имеет видеокарту nvidia;</li>
    <li>Параметр 2 – Обязательный параметр. Отвечает за путь модели фильтрации. Необходимо указать путь в файловой системе;</li>
    <li>Параметр 3 - Необязательный параметр. Отвечает за путь к базе данных для матчинга изображений из датасета эмбеддингов с объявлениями. Можно указать путь в файловой системе или символ “–“ (в данном случае в качестве пути будет выбрана директория с исходным кодом);</li>
    <li>Параметр 4 - Необязательный параметр. Отвечает за путь к базе данных для матчинга изображений из датасета эмбеддингов после фильтрации с объявлениями. Можно указать путь в файловой системе или символ “–“ (в данном случае в качестве пути будет выбрана директория с исходным кодом);</li>
    <li>Параметр 5 - Необязательный параметр. Путь к датасету с эмбеддингами после фильтрации, которые будет создаваться (или уже создан). Можно указать путь в файловой системе или символ “–“ (в данном случае в качестве пути датасета будет выбрана директория с исходным кодом);</li>
    <li>Параметр 6 - Необязательный параметр. Флаг тестового режима. Если задать его значение как True, то все отфильтрованные фотографии будут сохранены в папку output/test_output. Можно и не задавать значение данного флага, а просто прописать символ “-” (в таком случае модуль будет работать в стандартном режиме).</li>
  </ol>
</ol>
